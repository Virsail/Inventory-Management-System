{% extends 'base.html' %}
{%block navlinks%}
<li class="nav-item">
  <a class="nav-link" href="{{url_for('merchant.index')}}">
    <i class="fas fa-columns"></i>
    Dashboard
  </a>
</li>
<li class="nav-item">
<a class="nav-link" href="{{url_for('merchant.clerks')}}">
  <i class="fas fa-columns"></i>
  Clerks
</a>
</li>
<li class="nav-item">
<a class="nav-link active" href="{{url_for('merchant.stores')}}">
  <i class="fas fa-columns"></i>
  Store Reports
</a>
</li>
<li class="nav-item">
<a class="nav-link" href="{{url_for('merchant.product_requisition')}}">
  <i class="fas fa-columns"></i>
  Products Requests
</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="{{url_for('merchant.order_payment_status')}}">
    <i class="fas fa-columns"></i>
    Orders Payment Status
  </a>
</li>

{%endblock%}
{% block content %}
<div class="container">
  <ol class="breadcrumb">
    <li class="breadcrumb-item">
        <a href="#">Store Reports</a>
    </li>
</ol>
  <div class="row">
    <div class="col">
      <div class="card text-white bg-primary o-hidden h-100">
        <div class="card-body">
            <div class="card-body-icon">
                <i class="fa fa-fw fa-shopping-cart"></i>
            </div>
            <div class="mr-5"> Sales Revenue <br><span id="message-count">{{reports['sales_revenue']}}</span></div>
        </div>
      </div>
    </div>
    <div class="col">
      <div class="card text-white bg-primary o-hidden h-100">
        <div class="card-body">
            <div class="card-body-icon">
                <i class="fa fa-fw fa-shopping-cart"></i>
            </div>
            <div class="mr-5"> Total Items Sold <br><span id="message-count">{{reports['items_sold']}}</span></div>
        </div>
      </div>
    </div>
    <div class="col">
      <div class="card text-white bg-primary o-hidden h-100">
        <div class="card-body">
            <div class="card-body-icon">
                <i class="fa fa-fw fa-shopping-cart"></i>
            </div>
            <div class="mr-5"> Restock Requests <br><span id="message-count">{{reports['restock_requests']}}</span></div>
        </div>
      </div>
    </div>

    
  </div>
  <div class="row mt-3">
    <div class="col">
      <div class="card text-white bg-primary o-hidden h-100">
        <div class="card-body">
            <div class="card-body-icon">
                <i class="fa fa-fw fa-shopping-cart"></i>
            </div>
            <div class="mr-5"> Total Orders Cost <br><span id="message-count">{{reports['orders_cost']}}</span></div>
        </div>
      </div>
    </div>

    <div class="col">
      <div class="card text-white bg-primary o-hidden h-100">
        <div class="card-body">
            <div class="card-body-icon">
                <i class="fa fa-fw fa-shopping-cart"></i>
            </div>
            <div class="mr-5"> Products Spoilt <br><span id="message-count">{{reports['spoilt']}}</span></div>
        </div>
      </div>
    </div>
    <div class="col">
      <div class="card text-white bg-primary o-hidden h-100">
        <div class="card-body">
            <div class="card-body-icon">
                <i class="fa fa-fw fa-shopping-cart"></i>
            </div>
            <div class="mr-5"> Stock Available <br><span id="message-count">{{reports['stock']}}</span></div>
        </div>
      </div>
    </div>
  </div>



  <div class="card-header card-header-primary text-center mt-3">
    <h4 class="card-title">Products in Store</h4>
  </div>
  {%if reports['products']%}
  <table class="table table-striped table-responsive-md btn-table">
  
    <thead>
      <tr>
        <th>#</th>
        <th>Product Name</th>
        <th>Stock available</th>
        <th>Items spoilt</th>
        <th>Buying Price</th>
        <th>Selling Price</th>
      </tr>
    </thead>
  
    <tbody>
      {%for product in reports['products']%}
        <tr>
          <th scope="row">{{loop.index}}</th>
          
          <td>{{product.product_name}}</td>
          <td>{{product.product_stock}}</td>
          <td>{{product.product_spoilt}}</td>
          <td>{{product.product_buying_price}}</td>
          <td>{{product.product_selling_price}}</td>
         
        </tr>
      {%endfor%}  
    </tbody>
  
  </table>
  {%else%}
  <div class="container text-center">
    <div style="margin-top: 100px" class="alert alert-danger" role="alert">
      <h4 class="alert-heading"><i class="far fa-surprise fa-lg"></i> Oops, you have no product in your store.</h4>
      <hr>
    </div>
  </div>
  {%endif%}
</div>
{% endblock %}